<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Document</title>
    </head>
    <body>
        {# Iteration test. We should expect a long first build, with shorter subsequent builds #}
        {% for logo in logos %}
            <picture>
                {% set logoUrl = "/assets/images/" + logo.path %}
                <source srcset="{% getUrl logoUrl | resize({ height: 50, width: 50 }) | avif %}" media="(max-width: 600px)" type="image/avif">
                <source srcset="{% getUrl logoUrl | resize({ height: 50, width: 50 }) | webp %}" media="(max-width: 600px)" type="image/webp">
                <source srcset="{% getUrl logoUrl | resize({ height: 400, width: 400 }) %}" media="(min-width: 601px)" type="image/jpg">
                <img src="{% getUrl logoUrl | resize({ height: 400, width: 400 }) | png %}" alt="{{ logo.alt }}">
            </picture>
        {% endfor %}

        {# Test basic resize #}
        {% set logoUrl = "/assets/test.jpg" %}
        <img src="{% getUrl logoUrl | resize({width: 300}) %}" alt="test">

        {# Test format conversion #}
        <img src="{% getUrl logoUrl | webp %}" alt="test">

        {# Test complex chain #}
        <img src="{% getUrl logoUrl | resize({width: 300, height: 200}) | webp | rotate(90) %}" alt="test">

        {# Test direct usage without filters #}
        <img src="{% getUrl logoUrl %}" alt="test">

        {# Does the image work in async environments? #}
        {% from "macro.html" import testImage %}
        {{ testImage(logoUrl) }}
    </body>
</html>